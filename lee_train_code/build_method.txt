automatic_model_training_simple.py 실행 전에 해야하는 사전 실행 환경 설치 작업.

1. piper sample tts git clone!
    1) git clone https://github.com/rhasspy/piper-sample-generator
    2) cd piper-sample-generator
    3) git checkout 213d4d5

2. py파일에 sys.path.append(os.path.join(os.path.dirname(__file__), "piper-sample-generator")) 시스템 환경 변수 경로 추가.

3. pip 종속 라이브러리 설치
    1) pip install piper-tts piper-phonemize-cross
    2) pip install webrtcvad
    3) pip install 'torch<=2.5' torchvision torchaudio

4. https://github.com/rhasspy/piper-sample-generator/releases 에서 v2.0.0 en_US-libritts_r-medium.pt 모델 파일 다운로드. 다운로드 경로 : /home/data/openWakeWord/piper-sample-generator/models

5. torch 버전 2.5로 고정
    1) pip install --upgrade "torch<=2.5" torchvision torchaudio

6. openwakeword의 train.py 코드 실행 시 필요한 pip 라이브러리
    1) pip install deep-phonemizer

7. openwakeword/train.py 코드에 piper-sample-generator 시스템 환경 변수 폴더 경로 잡아줌
    1) 주석처리 : # sys.path.insert(0, os.path.abspath(config["piper_sample_generator_path"]))
    2) 추가 : sys.path.append("/home/openWakeWord/mike_open_wakeword/piper-sample-generator")

8. /usr/local/lib/python3.10/dist-packages/openwakeword/resources/models 에 melspectrogram.onnx와 같은 모델 파일들이 없어서 그냥 강제로 넣음. pip install --no-cache-dir openwakeword 해도 안 생김.

9. false_positive_validation_data_path: /home/openWakeWord/mike_open_wakeword/validation_set_features.npy 파일 다운로드 및 yml 컨피그 파일 경로 설정

10. ACAV100M_sample: /home/openWakeWord/mike_open_wakeword/ACAV100M_2000_hrs_16bit_sample/openwakeword_features_ACAV100M_2000_hrs_16bit.npy 파일 다운로드 및 yml 컨피그 파일 경로 설정
---------------------------------------------------------------------------------------

실행하면 생성 되는 폴더/파일들

1. /home/openWakeWord/audioset : Background 오디오 샘플
2. /home/openWakeWord/audioset_16k : Background 오디오 샘플
3. /home/openWakeWord/test_generation.wav : piper TTS 내 TEXT 음성 샘플
4. /home/openWakeWord/fma : Background 오디오 샘플
5. /home/openWakeWord/my_custom_model/hey_thomas/negative_test
6. /home/openWakeWord/my_custom_model/hey_thomas/negative_train
7. /home/openWakeWord/my_custom_model/hey_thomas/positive_test
8. /home/openWakeWord/my_custom_model/hey_thomas/positive_train

---------------------------------------------------------------------------------------
일단 automatic_model_training_simple_mike.py 코드, 온라인 서칭을 통해서 openwakeword 학습에 필요한 데이터 셋을 쭉 다 다운로드함.

1. piper-sample-generator 개발 환경 구축
    1) git clone https://github.com/rhasspy/piper-sample-generator
    2) https://github.com/rhasspy/piper-sample-generator/releases 에서 v2.0.0 en_US-libritts_r-medium.pt 모델 파일 다운로드. 다운로드 경로 : /home/data/openWakeWord/piper-sample-generator/models
2. /usr/local/lib/python3.10/dist-packages/openwakeword/resources/models 에 melspectrogram.onnx, embedding_model.onnx와 같은 모델 파일들이 없어서 그냥 강제로 넣음.
3. negative sample로 사용할 데이터 다운로드 : ACAV100M_2000_hrs_16bit_sample/openwakeword_features_ACAV100M_2000_hrs_16bit.npy 다운로드 / https://huggingface.co/datasets/davidscripka/openwakeword_features/tree/main
4. background dataset 다운로드 : audioset_16k(mike 코드에서 다운로드), fma(colab 코드에서 실행해서 다운되는거 저장), mit_rirs(dataset_download.py 코드에서 다운로드), mike_fma(mike 코드에 noise, tone, mix 형태로 그냥 노이즈 데이터)
5. false_positive_validation_data 검증 데이터 다운로드 : validation_set_features.npy

Dataset Download Reference url
1. ACAV100M_2000_hrs_16bit_sample, validation_set_features.npy : https://huggingface.co/datasets/davidscripka/openwakeword_features/tree/main
2. piper tts model file : https://github.com/rhasspy/piper-sample-generator/releases v2.0.0
3. background dataset : audioset_16k - https://huggingface.co/datasets/agkphysics/AudioSet, fma - https://github.com/mdeff/fma, mit_rirs - https://huggingface.co/datasets/davidscripka/MIT_environmental_impulse_responses, 

---------------------------------------------------------------------------------------
automatic_model_training_simple.py 순서대로 파일 경로 맞추자.

automatic_model_training_simple.py로 학습 완료한 뒤에 결과 저장하는 방법 - 자동화하는 bash 파일 만들자.

1. my_custom_model 폴더 (positive negative sample wav, npy 학습, 평가 파일)
2. my_model.yaml 파일 (학습 컨피그 파일)
3. savefig_default.png 파일 (정확도 평가)
4. negative_features_false_positive_eval.png 파일 (false positive 평가)